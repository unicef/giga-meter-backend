-- Migration: Update iso_3_code for countries

UPDATE country
SET iso3_format = CASE
    WHEN code = 'CN' THEN 'CHN'
    WHEN code = 'SS' THEN 'SSD'
    WHEN code = 'KE' THEN 'KEN'
    WHEN code = 'NP' THEN 'NPL'
    WHEN code = 'SL' THEN 'SLE'
    WHEN code = 'MM' THEN 'MMR'
    WHEN code = 'LB' THEN 'LBN'
    WHEN code = 'SY' THEN 'SYR'
    WHEN code = 'SD' THEN 'SDN'
    WHEN code = 'IQ' THEN 'IRQ'
    WHEN code = 'TR' THEN 'TUR'
    WHEN code = 'JO' THEN 'JOR'
    WHEN code = 'PH' THEN 'PHL'
    WHEN code = 'PS' THEN 'PSE'
    WHEN code = 'YE' THEN 'YEM'
    WHEN code = 'NG' THEN 'NGA'
    WHEN code = 'AF' THEN 'AFG'
    WHEN code = 'PK' THEN 'PAK'
    WHEN code = 'KH' THEN 'KHM'
    WHEN code = 'ID' THEN 'IDN'
    WHEN code = 'CD' THEN 'COD'
    WHEN code = 'KZ' THEN 'KAZ'
    WHEN code = 'SO' THEN 'SOM'
    WHEN code = 'ZA' THEN 'ZAF'
    WHEN code = 'RW' THEN 'RWA'
    WHEN code = 'ET' THEN 'ETH'
    WHEN code = 'LR' THEN 'LBR'
    WHEN code = 'KG' THEN 'KGZ'
    WHEN code = 'BO' THEN 'BOL'
    WHEN code = 'HT' THEN 'HTI'
    WHEN code = 'MW' THEN 'MWI'
    WHEN code = 'IN' THEN 'IND'
    WHEN code = 'BF' THEN 'BFA'
    WHEN code = 'ZM' THEN 'ZMB'
    WHEN code = 'LY' THEN 'LBY'
    WHEN code = 'LK' THEN 'LKA'
    WHEN code = 'CI' THEN 'CIV'
    WHEN code = 'MZ' THEN 'MOZ'
    WHEN code = 'BD' THEN 'BGD'
    WHEN code = 'GN' THEN 'GIN'
    WHEN code = 'UG' THEN 'UGA'
    WHEN code = 'ZW' THEN 'ZWE'
    WHEN code = 'MG' THEN 'MDG'
    WHEN code = 'TZ' THEN 'TZA'
    WHEN code = 'AO' THEN 'AGO'
    WHEN code = 'LA' THEN 'LAO'
    WHEN code = 'SN' THEN 'SEN'
    WHEN code = 'ML' THEN 'MLI'
    WHEN code = 'NE' THEN 'NER'
    WHEN code = 'CM' THEN 'CMR'
    WHEN code = 'TN' THEN 'TUN'
    WHEN code = 'DJ' THEN 'DJI'
    WHEN code = 'TD' THEN 'TCD'
    WHEN code = 'JM' THEN 'JAM'
    WHEN code = 'BB' THEN 'BRB'
    WHEN code = 'KP' THEN 'PRK'
    WHEN code = 'PG' THEN 'PNG'
    WHEN code = 'TH' THEN 'THA'
    WHEN code = 'VN' THEN 'VNM'
    WHEN code = 'UA' THEN 'UKR'
    WHEN code = 'BI' THEN 'BDI'
    WHEN code = 'ER' THEN 'ERI'
    WHEN code = 'AR' THEN 'ARG'
    WHEN code = 'BR' THEN 'BRA'
    WHEN code = 'EC' THEN 'ECU'
    WHEN code = 'MX' THEN 'MEX'
    WHEN code = 'CO' THEN 'COL'
    WHEN code = 'CF' THEN 'CAF'
    WHEN code = 'GH' THEN 'GHA'
    WHEN code = 'TG' THEN 'TGO'
    WHEN code = 'GW' THEN 'GNB'
    WHEN code = 'BJ' THEN 'BEN'
    WHEN code = 'MR' THEN 'MRT'
    WHEN code = 'MY' THEN 'MYS'
    WHEN code = 'IR' THEN 'IRN'
    WHEN code = 'EG' THEN 'EGY'
    WHEN code = 'CG' THEN 'COG'
    WHEN code = 'GQ' THEN 'GNQ'
    WHEN code = 'CV' THEN 'CPV'
    WHEN code = 'GA' THEN 'GAB'
    WHEN code = 'ST' THEN 'STP'
    WHEN code = 'GM' THEN 'GMB'
    WHEN code = 'XK' THEN 'XKX'
    WHEN code = 'SZ' THEN 'SWZ'
    WHEN code = 'BG' THEN 'BGR'
    WHEN code = 'RS' THEN 'SRB'
    WHEN code = 'TJ' THEN 'TJK'
    WHEN code = 'MD' THEN 'MDA'
    WHEN code = 'RO' THEN 'ROU'
    WHEN code = 'BY' THEN 'BLR'
    WHEN code = 'LS' THEN 'LSO'
    WHEN code = 'UZ' THEN 'UZB'
    WHEN code = 'MN' THEN 'MNG'
    WHEN code = 'BT' THEN 'BTN'
    WHEN code = 'MV' THEN 'MDV'
    WHEN code = 'AL' THEN 'ALB'
    WHEN code = 'MK' THEN 'MKD'
    WHEN code = 'ME' THEN 'MNE'
    WHEN code = 'TM' THEN 'TKM'
    WHEN code = 'CL' THEN 'CHL'
    WHEN code = 'HR' THEN 'HRV'
    WHEN code = 'SV' THEN 'SLV'
    WHEN code = 'DO' THEN 'DOM'
    WHEN code = 'PE' THEN 'PER'
    WHEN code = 'AM' THEN 'ARM'
    WHEN code = 'AZ' THEN 'AZE'
    WHEN code = 'GR' THEN 'GRC'
    WHEN code = 'BZ' THEN 'BLZ'
    WHEN code = 'CR' THEN 'CRI'
    WHEN code = 'GT' THEN 'GTM'
    WHEN code = 'PA' THEN 'PAN'
    WHEN code = 'PY' THEN 'PRY'
    WHEN code = 'HN' THEN 'HND'
    WHEN code = 'MA' THEN 'MAR'
    WHEN code = 'DZ' THEN 'DZA'
    WHEN code = 'BA' THEN 'BIH'
    WHEN code = 'BW' THEN 'BWA'
    WHEN code = 'KM' THEN 'COM'
    WHEN code = 'CU' THEN 'CUB'
    WHEN code = 'GE' THEN 'GEO'
    WHEN code = 'GY' THEN 'GUY'
    WHEN code = 'NI' THEN 'NIC'
    WHEN code = 'SA' THEN 'SAU'
    WHEN code = 'TL' THEN 'TLS'
    WHEN code = 'UY' THEN 'URY'
    WHEN code = 'VE' THEN 'VEN'
    WHEN code = 'CZ' THEN 'CZE'
    WHEN code = 'DE' THEN 'DEU'
    WHEN code = 'EH' THEN 'ESH'
    WHEN code = 'ES' THEN 'ESP'
    WHEN code = 'EE' THEN 'EST'
    WHEN code = 'FI' THEN 'FIN'
    WHEN code = 'HK' THEN 'HKG'
    WHEN code = 'AW' THEN 'ABW'
    WHEN code = 'BN' THEN 'BRN'
    WHEN code = 'AI' THEN 'AIA'
    WHEN code = 'AX' THEN 'ALA'
    WHEN code = 'AE' THEN 'ARE'
    WHEN code = 'AQ' THEN 'ATA'
    WHEN code = 'TF' THEN 'ATF'
    WHEN code = 'BS' THEN 'BHS'
    WHEN code = 'CA' THEN 'CAN'
    WHEN code = 'CH' THEN 'CHE'
    WHEN code = 'CK' THEN 'COK'
    WHEN code = 'CX' THEN 'CXR'
    WHEN code = 'CY' THEN 'CYP'
    WHEN code = 'DK' THEN 'DNK'
    WHEN code = 'GL' THEN 'GRL'
    WHEN code = 'AD' THEN 'AND'
    WHEN code = 'BM' THEN 'BMU'
    WHEN code = 'AG' THEN 'ATG'
    WHEN code = 'AU' THEN 'AUS'
    WHEN code = 'AT' THEN 'AUT'
    WHEN code = 'BE' THEN 'BEL'
    WHEN code = 'BQ' THEN 'BES'
    WHEN code = 'BH' THEN 'BHR'
    WHEN code = 'BL' THEN 'BLM'
    WHEN code = 'BV' THEN 'BVT'
    WHEN code = 'CC' THEN 'CCK'
    WHEN code = 'CW' THEN 'CUW'
    WHEN code = 'KY' THEN 'CYM'
    WHEN code = 'DM' THEN 'DMA'
    WHEN code = 'FJ' THEN 'FJI'
    WHEN code = 'FK' THEN 'FLK'
    WHEN code = 'FR' THEN 'FRA'
    WHEN code = 'FO' THEN 'FRO'
    WHEN code = 'FM' THEN 'FSM'
    WHEN code = 'GB' THEN 'GBR'
    WHEN code = 'GG' THEN 'GGY'
    WHEN code = 'GI' THEN 'GIB'
    WHEN code = 'GD' THEN 'GRD'
    WHEN code = 'GF' THEN 'GUF'
    WHEN code = 'GU' THEN 'GUM'
    WHEN code = 'GP' THEN 'GLP'
    WHEN code = 'HM' THEN 'HMD'
    WHEN code = 'LV' THEN 'LVA'
    WHEN code = 'PL' THEN 'POL'
    WHEN code = 'PR' THEN 'PRI'
    WHEN code = 'NO' THEN 'NOR'
    WHEN code = 'IE' THEN 'IRL'
    WHEN code = 'JP' THEN 'JPN'
    WHEN code = 'KI' THEN 'KIR'
    WHEN code = 'KW' THEN 'KWT'
    WHEN code = 'LT' THEN 'LTU'
    WHEN code = 'LU' THEN 'LUX'
    WHEN code = 'MC' THEN 'MCO'
    WHEN code = 'MH' THEN 'MHL'
    WHEN code = 'MS' THEN 'MSR'
    WHEN code = 'MU' THEN 'MUS'
    WHEN code = 'NR' THEN 'NRU'
    WHEN code = 'NZ' THEN 'NZL'
    WHEN code = 'OM' THEN 'OMN'
    WHEN code = 'GS' THEN 'SGS'
    WHEN code = 'SH' THEN 'SHN'
    WHEN code = 'SJ' THEN 'SJM'
    WHEN code = 'SB' THEN 'SLB'
    WHEN code = 'LC' THEN 'LCA'
    WHEN code = 'PN' THEN 'PCN'
    WHEN code = 'PW' THEN 'PLW'
    WHEN code = 'PT' THEN 'PRT'
    WHEN code = 'PF' THEN 'PYF'
    WHEN code = 'QA' THEN 'QAT'
    WHEN code = 'HU' THEN 'HUN'
    WHEN code = 'IM' THEN 'IMN'
    WHEN code = 'MF' THEN 'MAF'
    WHEN code = 'IO' THEN 'IOT'
    WHEN code = 'IS' THEN 'ISL'
    WHEN code = 'IL' THEN 'ISR'
    WHEN code = 'IT' THEN 'ITA'
    WHEN code = 'JE' THEN 'JEY'
    WHEN code = 'KN' THEN 'KNA'
    WHEN code = 'LI' THEN 'LIE'
    WHEN code = 'MO' THEN 'MAC'
    WHEN code = 'MT' THEN 'MLT'
    WHEN code = 'RE' THEN 'REU'
    WHEN code = 'RU' THEN 'RUS'
    WHEN code = 'MP' THEN 'MNP'
    WHEN code = 'MQ' THEN 'MTQ'
    WHEN code = 'YT' THEN 'MYT'
    WHEN code = 'NC' THEN 'NCL'
    WHEN code = 'NF' THEN 'NFK'
    WHEN code = 'NU' THEN 'NIU'
    WHEN code = 'NL' THEN 'NLD'
    WHEN code = 'SG' THEN 'SGP'
    WHEN code = 'TK' THEN 'TKL'
    WHEN code = 'TO' THEN 'TON'
    WHEN code = 'TW' THEN 'TWN'
    WHEN code = 'MI' THEN 'MID'
    WHEN code = 'US' THEN 'USA'
    WHEN code = 'VA' THEN 'VAT'
    WHEN code = 'VU' THEN 'VUT'
    WHEN code = 'SR' THEN 'SUR'
    WHEN code = 'SK' THEN 'SVK'
    WHEN code = 'SI' THEN 'SVN'
    WHEN code = 'SE' THEN 'SWE'
    WHEN code = 'SX' THEN 'SXM'
    WHEN code = 'SC' THEN 'SYC'
    WHEN code = 'TC' THEN 'TCA'
    WHEN code = 'PM' THEN 'SPM'
    WHEN code = 'SM' THEN 'SMR'
    WHEN code = 'TT' THEN 'TTO'
    WHEN code = 'TV' THEN 'TUV'
    WHEN code = 'VC' THEN 'VCT'
    WHEN code = 'VG' THEN 'VGB'
    WHEN code = 'VI' THEN 'VIR'
    WHEN code = 'WF' THEN 'WLF'
    WHEN code = 'WS' THEN 'WSM'
    ELSE iso3_format
END
